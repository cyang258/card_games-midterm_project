<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Home Page</title>

    <link rel="stylesheet" href="/vendor/normalize-4.1.1.css" type="text/css" />
    <link rel="stylesheet" href="/vendor/border-box.css" type="text/css" />
    <link rel="stylesheet" href="/styles/layout.css" type="text/css" />

    <script type="text/javascript" src="/vendor/jquery-3.0.0.js"></script>
    <script type="text/javascript" src="/scripts/users_games.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.4/socket.io.js"></script>
  </head>

  <body>
    <%-include _game-page.ejs%>
    <div class='container'>
     <div class='row'>
       <div class='col-md-4'>
         <div class='well'>
           <h3>Online Users</h3>
           <ul class='list-group' id='users'></ul>
         </div>
       </div>
       <div class='col-md-8'>
         <div class='chat' id='chat'></div>

         <form id='messageForm'>
           <div class='form-group'>
             <label>Enter Message</label>
             <textarea class='form-control' id='message'></textarea>
             <br />
             <input type="submit" class='btn btn-primary' value='Send Message' />
           </div>

         </form>
       </div>
     </div>
   </div>
   <h3>Games</h3>
   <div class="games"></div>

    <h3>Opponent</h3>
    <section class="deck">
      <div></div>
      <h3>Deck</h3>
      <div>
      </div>
    </section>
    <section class="user-hand">
      <h3>Your Hand</h3>
    </section>
    <script>
       // function createGame(id) {

       // }

      $(function(){
        var socket = io.connect();





        // for(var gameId = 0; gameId < 5; gameId++) {
        //   createGame(gameId)
        // }





        var $Ready = $('#Ready');
        var $createRoom = $('#create')
        var $joinRoom   = $('#join')
        var $roomNumber = $('#roomNumber')
        var $joinNumber = $('#joinNumber')
        var $leaveRoom  = $('#leaveRoom')

        //create a room
        $createRoom.submit(function(e){
          e.preventDefault();
          socket.emit('createRoom', $roomNumber.val());
          $roomNumber.val('');
        })

        $joinRoom.submit(function(e){
          e.preventDefault();
          socket.emit('join_A_Room', $joinNumber.val());
          $joinNumber.val('')
        })

        socket.on('alert',function(data){
          console.log(data)
        })
       //leave a room
        $leaveRoom.on('click', function(){

        })

        $Ready.on("click", function(){
          // socket.emit()
        })
       //chat
       var $messageForm = $('#messageForm')
       var $message = $('#message')
       var $chat = $('#chat')



         $messageForm.submit(function(e){
           e.preventDefault();
           console.log('submited')
           socket.emit('send message', { gameId: 5,
                                         message: $message.val()});
           $message.val('');
         })

         socket.on('new message', function(data){
            $chat.append('<div class="well">'+ data.gameId + ": " + data.message +'</div>');
         })

      })
    </script>
  </body>
</html>
